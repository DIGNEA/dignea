<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>dignea: Create an algorithm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
    <!-- ... other metadata & script includes ... -->
    <script type="text/javascript" src="../doxygen-awesome-css/doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
    </script>
    <script type="text/javascript"
        src="../doxygen-awesome-css/doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeFragmentCopyButton.init()
    </script>
    <script type="text/javascript" src="../doxygen-awesome-css/doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeParagraphLink.init()
    </script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">dignea
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Diverse Instance Generator with Novelty Search and Evolutionary Algorithms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_markdown_01_create_algorithm.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Create an algorithm </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md18">Creating the base Simulated Annealing class.</a></li>
<li class="level1"><a href="#autotoc_md19">Define the methods in SimulatedAnnealing</a></li>
<li class="level1"><a href="#autotoc_md20">Define the remaining methods.</a><ul><li class="level2"><a href="#autotoc_md21">Constructor</a></li>
<li class="level2"><a href="#autotoc_md22">Run</a></li>
<li class="level2"><a href="#autotoc_md23">Perturbation</a></li>
<li class="level2"><a href="#autotoc_md24">Population management</a></li>
<li class="level2"><a href="#autotoc_md25">Progress</a></li>
<li class="level2"><a href="#autotoc_md26">Getters and Setters</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>To exemplify how to create a new algorithm in DIGNEA, we will see how to include the classical <a href="https://es.wikipedia.org/wiki/Algoritmo_de_recocido_simulado">Simulated Annealing</a> algorithm.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Creating the base Simulated Annealing class.</h1>
<p>First of all, create a new <b><a class="el" href="SimulatedAnnealing_8h_source.html">SimulatedAnnealing.h</a></b> file which will contain all the code for the SA algorithm.</p>
<p>To create a new algorithm and allow it to be usable across different methods and classes in DIGNEA, we must define the new algorithm as a subclass of <a class="el" href="classAbstractEA.html" title="Class to define an Abstract Evolutionary Algorithm. This is the base skeleton for future extensions.">AbstractEA</a> in the <b><a class="el" href="SimulatedAnnealing_8h_source.html">SimulatedAnnealing.h</a></b> file. This class is the mother class for every type of algorithm that you may want to include in DIGNEA. Moreover, since DIGNEA is a template-based framework which aims to make algorithm as flexible as possible to address multiple types of problems and representations we must defines the <em><a class="el" href="classSimulatedAnnealing.html" title="Simulated Annealing Algorithm.">SimulatedAnnealing</a></em> class as a template-class with a template parameter to define the <a class="el" href="classSolution.html" title="Class to represent a solution to the optimization problems in the tool.">Solution</a> type (<a class="el" href="SolutionTypes_8h_source.html">SolutionTypes.h</a>).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="AbstractEA_8h.html">dignea/core/AbstractEA.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keyword">class </span><a class="code" href="classSimulatedAnnealing.html">SimulatedAnnealing</a> : <span class="keyword">public</span> <a class="code" href="classAbstractEA.html">AbstractEA</a>&lt;S&gt; {</div>
<div class="line">   <span class="comment">// TODO: Include necessary methods and attributes</span></div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md19"></a>
Define the methods in SimulatedAnnealing</h1>
<p>The next step is to consider the methods and attributes that our new algorithm must contain. Notice that it is also necessary to define the virtual methods from <a class="el" href="classAbstractEA.html" title="Class to define an Abstract Evolutionary Algorithm. This is the base skeleton for future extensions.">AbstractEA</a>. It may be recomended as well to override some methods to define a custom operation. From <a class="el" href="classAbstractEA.html" title="Class to define an Abstract Evolutionary Algorithm. This is the base skeleton for future extensions.">AbstractEA</a> we must define the following methods:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">void</span> run() <span class="keyword">override</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">string</span> getName()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Simulated Annealing&quot;</span>; };</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">string</span> getID()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;SA&quot;</span>; }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classFront.html">Front&lt;S&gt;</a> getResults() <span class="keyword">const override</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">void</span> initProgress() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> updateProgress() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> finishProgress() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> isStoppingConditionReached() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> createInitialPopulation() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> evaluatePopulation(vector&lt;S&gt; &amp;vector1)<span class="keyword"> override</span>{};</div>
</div><!-- fragment --><p>First of all, the <b>run</b> method must be implemented for every new algorithm to define the custom workflow. Moreover, it is necessary to define the getName() and getID() methods. Besides, <a class="el" href="classAbstractEA.html" title="Class to define an Abstract Evolutionary Algorithm. This is the base skeleton for future extensions.">AbstractEA</a> does not implement the getResults() method to allow algorithm-dependent results.</p>
<p>Apart from this public methods, some protected methods must be overriden; i.e., the methods related to the evolutionary process (init, update, finish-Progress), the stop criteria checker method (isStoppingConditionReached) as well as the methods for generating and evaluating the population. Notice that the <em>evaluatePopulation</em> method is overriden as a empty method. The SA algorithm is a search-based metaheuristic which only uses a single individual as the solution to update in each generation. Therefore, the population size of this algorithm is equal to 1. We could still implement the <em>evaluatePopulation</em> and consider this restriction inside the method. However, we decide to show how to adapt the code for non population-based algorithms. The evaluation stage of the SA algorithm will be performed in the following <em>evaluateInds</em> method. This method will receive the current solution and a new offspring solution, evaluate both solutions and return the fittest solution to be set as our new current solution.</p>
<div class="fragment"><div class="line">S evaluateInds(S &amp;current, S &amp;offspring);</div>
</div><!-- fragment --><p>After that, we should include the basic attributes for a SA algorithm (<em>currentTemp</em> and <em>tempVariation</em>), and some extra methods to perform the basic steps of the <a href="https://es.wikipedia.org/wiki/Algoritmo_de_recocido_simulado#Pseudoc%C3%B3digo">algorithm</a>. The <a class="el" href="classSimulatedAnnealing.html" title="Simulated Annealing Algorithm.">SimulatedAnnealing</a> class at this stage is shown below.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="AbstractEA_8h.html">dignea/core/AbstractEA.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dignea/utilities/exceptions/NoMOAllowed.h&gt;</span> <span class="comment">// For setProblem</span></div>
<div class="line"><span class="preprocessor">#include &lt;dignea/utilities/random/PseudoRandom.h&gt;</span>  <span class="comment">// Random number generation</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keyword">class </span><a class="code" href="classSimulatedAnnealing.html">SimulatedAnnealing</a> : <span class="keyword">public</span> <a class="code" href="classAbstractEA.html">AbstractEA</a>&lt;S&gt; {</div>
<div class="line">   <span class="keyword">public</span>:</div>
<div class="line">    <a class="code" href="classSimulatedAnnealing.html">SimulatedAnnealing</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> &amp;maxEvaluations, <span class="keyword">const</span> <span class="keywordtype">float</span> &amp;initialTemp,</div>
<div class="line">                       <span class="keyword">const</span> <span class="keywordtype">float</span> &amp;tempVariation);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">virtual</span> ~<a class="code" href="classSimulatedAnnealing.html">SimulatedAnnealing</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> run() <span class="keyword">override</span>;</div>
<div class="line">   </div>
<div class="line">    <span class="keywordtype">string</span> getName()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Simulated Annealing&quot;</span>; };</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">string</span> getID()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;SA&quot;</span>; }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classFront.html">Front&lt;S&gt;</a> getResults() <span class="keyword">const override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> setProblem(shared_ptr&lt;<a class="code" href="classProblem.html">Problem&lt;S&gt;</a>&gt; prob) <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> setProblem(<a class="code" href="classProblem.html">Problem&lt;S&gt;</a> *prob) <span class="keyword">override</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">float</span> getTempVariation()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> tempVariation; }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> setTempVariation(<span class="keywordtype">float</span> tempVariation) {</div>
<div class="line">        SimulatedAnnealing::tempVariation = tempVariation;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">float</span> getCurrentTemp()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> currentTemp; }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> setCurrentTemp(<span class="keywordtype">float</span> currentTemp) {</div>
<div class="line">        SimulatedAnnealing::currentTemp = currentTemp;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> setPopulationSize(<span class="keyword">const</span> <span class="keywordtype">int</span> &amp;pSize);</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">protected</span>:</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> initProgress() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> updateProgress() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> finishProgress() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> isStoppingConditionReached() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> createInitialPopulation() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> evaluatePopulation(vector&lt;S&gt; &amp;vector1)<span class="keyword"> override</span>{};</div>
<div class="line"> </div>
<div class="line">    S evaluateInds(S &amp;current, S &amp;offspring);</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">private</span>:</div>
<div class="line">    S applyPerturbations();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> updateTemp() { currentTemp *= tempVariation; }</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">float</span> tempVariation;</div>
<div class="line">    <span class="keywordtype">float</span> currentTemp;</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md20"></a>
Define the remaining methods.</h1>
<p>Up to this point we have just define the basic methods signature and implement some inline methods. Now we should define the code inside the methods we have not defined yet.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Constructor</h2>
<p>The constructor for the SA algorithm must define the maximum number of evaluations to perform, the inital temperature and the temperature variation to perform at each generation. It is also mandatory to call the mother class constructor (<a class="el" href="classAbstractEA.html" title="Class to define an Abstract Evolutionary Algorithm. This is the base skeleton for future extensions.">AbstractEA</a>). Notice that the line <em><a class="el" href="classAbstractEA.html" title="Class to define an Abstract Evolutionary Algorithm. This is the base skeleton for future extensions.">AbstractEA</a>&lt;S&gt;(maxEvaluations, 1)</em> calls the <a class="el" href="classAbstractEA.html" title="Class to define an Abstract Evolutionary Algorithm. This is the base skeleton for future extensions.">AbstractEA</a> constructor setting the maximum number of evaluations to perform and the population size to one.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><a class="code" href="classSimulatedAnnealing.html#aefc2d5fd86c8e8f4f2e560feccf4258d">SimulatedAnnealing&lt;S&gt;::SimulatedAnnealing</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> &amp;maxEvaluations,</div>
<div class="line">                                          <span class="keyword">const</span> <span class="keywordtype">float</span> &amp;initialTemp,</div>
<div class="line">                                          <span class="keyword">const</span> <span class="keywordtype">float</span> &amp;tempVariation)</div>
<div class="line">    : <a class="code" href="classAbstractEA.html">AbstractEA</a>&lt;S&gt;(maxEvaluations, 1),</div>
<div class="line">      tempVariation(tempVariation),</div>
<div class="line">      currentTemp(initialTemp) {}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
Run</h2>
<p>The run method simply performs the SA algorithm. It starts by creating a initial population (one individual generated randomly), then while the maximum number of evaluations have not been reached yet it creates a new offspring from the current solution, evaluate both solutions and keeps the fittest one. After that it updates the current temperature.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="classSimulatedAnnealing.html#a3ffc1b7fc648f34f1b5faba61d56e734">SimulatedAnnealing&lt;S&gt;::run</a>() {</div>
<div class="line">    <span class="keywordflow">if</span> (this-&gt;problem) {</div>
<div class="line">        this-&gt;createInitialPopulation();</div>
<div class="line">        this-&gt;startTime = chrono::system_clock::now();</div>
<div class="line">        <span class="keywordflow">while</span> (!this-&gt;isStoppingConditionReached()) {</div>
<div class="line">            S offspring = applyPerturbations();</div>
<div class="line">            this-&gt;population[0] = evaluateInds(this-&gt;population[0], offspring);</div>
<div class="line">            updateTemp();</div>
<div class="line">            this-&gt;updateProgress();</div>
<div class="line">        }</div>
<div class="line">        this-&gt;endTime = chrono::system_clock::now();</div>
<div class="line">        this-&gt;finishProgress();</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Problem is not set in SA::run&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md23"></a>
Perturbation</h2>
<p>This method simply transcribes the pseudocode of the SA for updating and existing solution. Creates an offspring as a clone of the current solution (population[0]) and then perform some perturbations of each variable.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line">S <a class="code" href="classSimulatedAnnealing.html">SimulatedAnnealing&lt;S&gt;::applyPerturbations</a>() {</div>
<div class="line">    S offspring = this-&gt;population[0];</div>
<div class="line">    <span class="keywordtype">double</span> pert = <a class="code" href="classPseudoRandom.html#a6a85657b19f803952051e045c4181e20">PseudoRandom::randDouble</a>();</div>
<div class="line">    vector vars = offspring.getVariables();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; vars.size(); i++) {</div>
<div class="line">        <span class="keywordtype">double</span> newValue = pert * (this-&gt;problem-&gt;getUpperLimit(i) -</div>
<div class="line">                                  this-&gt;problem-&gt;getLowerLimit(i)) +</div>
<div class="line">                          this-&gt;problem-&gt;getLowerLimit(i);</div>
<div class="line">        vars[i] = newValue;</div>
<div class="line">    }</div>
<div class="line">    offspring.setVariables(vars);</div>
<div class="line">    <span class="keywordflow">return</span> offspring;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md24"></a>
Population management</h2>
<p>The following methods are designed to create and evaluate the solutions respectively. <em>createInitialPopulation</em> generates a single solution using the problem <em>createSolution</em> method and starts the evoluationary process.</p>
<p><em>evaluateInds</em> is the method that we defined to perform our custom evaluation (instead of using evaluatePopulation). This method receives two solutions, evaluates them and returns the new current solution based on SA selection criteria.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="classSimulatedAnnealing.html#ade440d2d966d7f5c94d377ffe896d035">SimulatedAnnealing&lt;S&gt;::createInitialPopulation</a>() {</div>
<div class="line">    this-&gt;population[0] = this-&gt;problem-&gt;createSolution();</div>
<div class="line">    this-&gt;problem-&gt;evaluate(this-&gt;population[0]);</div>
<div class="line">    this-&gt;nextCheckpoint = 0;</div>
<div class="line">    this-&gt;initProgress();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line">S <a class="code" href="classSimulatedAnnealing.html#a6814fd2bb6cb6a9bef197400bbeea0e2">SimulatedAnnealing&lt;S&gt;::evaluateInds</a>(S &amp;current, S &amp;offspring) {</div>
<div class="line">    this-&gt;problem-&gt;evaluate(current);</div>
<div class="line">    this-&gt;problem-&gt;evaluate(offspring);</div>
<div class="line">    <span class="keywordtype">double</span> diff = offspring.getFitness() - current.getFitness();</div>
<div class="line">    <span class="keywordflow">if</span> (diff &lt; 0.0) {</div>
<div class="line">        <span class="keywordflow">return</span> offspring;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> randProb = <a class="code" href="classPseudoRandom.html#a6a85657b19f803952051e045c4181e20">PseudoRandom::randDouble</a>();</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> e = exp(-diff / this-&gt;currentTemp);</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> prob = min(1.0, e);</div>
<div class="line">        <span class="keywordflow">return</span> (randProb &lt; prob) ? offspring : current;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25"></a>
Progress</h2>
<p>The methods to manage the evolutionary process are straightforward. Init progress simply set the performed evaluations to one, update increases the evaluations in two and finally finishProgress computes the elapsed time.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="classSimulatedAnnealing.html#a78382106e5ccc3f145968592dc0e7787">SimulatedAnnealing&lt;S&gt;::initProgress</a>() {</div>
<div class="line">    this-&gt;performedEvaluations = 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="classSimulatedAnnealing.html#ae47e783596812e2278925832e9a0c9a7">SimulatedAnnealing&lt;S&gt;::updateProgress</a>() {</div>
<div class="line">    this-&gt;performedEvaluations += 2;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="classSimulatedAnnealing.html#a6545a15cfd4e91e67a12f478896fe1d0">SimulatedAnnealing&lt;S&gt;::finishProgress</a>() {</div>
<div class="line">    std::chrono::duration&lt;double&gt; diff = this-&gt;endTime - this-&gt;startTime;</div>
<div class="line">    this-&gt;elapsedTime = diff.count();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">bool</span> <a class="code" href="classSimulatedAnnealing.html#ac0ef97095644bb42c7226e754fab1971">SimulatedAnnealing&lt;S&gt;::isStoppingConditionReached</a>() {</div>
<div class="line">    <span class="keywordflow">return</span> (this-&gt;performedEvaluations &gt;= this-&gt;maxEvaluations);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
Getters and Setters</h2>
<p>Finally, the remaining getters and setters for SA are defined here. This methods although simple, required some condition evaluation to be performed safely. For instance, SA only works for single objective optimization problems and this must be checked in the setProblem methods. Moreover, the size of the population cannot be updated using the setPopulationSize method.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><a class="code" href="classFront.html">Front&lt;S&gt;</a> <a class="code" href="classSimulatedAnnealing.html#a4f35166b08340a0393f24764140c82d9">SimulatedAnnealing&lt;S&gt;::getResults</a>()<span class="keyword"> const </span>{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="classFront.html">Front&lt;S&gt;</a>(this-&gt;population);</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="classSimulatedAnnealing.html#adc1af6eeafefa2b1ac091287b7f133d1">SimulatedAnnealing&lt;S&gt;::setProblem</a>(shared_ptr&lt;<a class="code" href="classProblem.html">Problem&lt;S&gt;</a>&gt; prob) {</div>
<div class="line">    <span class="keywordflow">if</span> (prob-&gt;getNumberOfObjs() != 1) {</div>
<div class="line">        std::string where = <span class="stringliteral">&quot;SimulatedAnnealing setProblem&quot;</span>;</div>
<div class="line">        <span class="keywordflow">throw</span>(NoMOAllowed(where));</div>
<div class="line">    }</div>
<div class="line">    this-&gt;problem = prob;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="classSimulatedAnnealing.html#adc1af6eeafefa2b1ac091287b7f133d1">SimulatedAnnealing&lt;S&gt;::setProblem</a>(<a class="code" href="classProblem.html">Problem&lt;S&gt;</a> *prob) {</div>
<div class="line">    <span class="keywordflow">if</span> (prob-&gt;<a class="code" href="classProblem.html#a679e9f627591d774c3bde6c63f9be7b6">getNumberOfObjs</a>() != 1) {</div>
<div class="line">        std::string where = <span class="stringliteral">&quot;SimulatedAnnealing setProblem&quot;</span>;</div>
<div class="line">        <span class="keywordflow">throw</span>(NoMOAllowed(where));</div>
<div class="line">    }</div>
<div class="line">    this-&gt;problem.reset(prob);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="classSimulatedAnnealing.html#aa268376e2af84bda597ebbc103362bfd">SimulatedAnnealing&lt;S&gt;::setPopulationSize</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> &amp;pSize) {</div>
<div class="line">    std::string where = <span class="stringliteral">&quot;SimulatedAnnealing setPopulationSize&quot;</span>;</div>
<div class="line">    <span class="keywordflow">throw</span>(NotImplemented(where));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif  // DIGNEA_SIMULATEDANNEALING_H</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aclassSimulatedAnnealing_html_a78382106e5ccc3f145968592dc0e7787"><div class="ttname"><a href="classSimulatedAnnealing.html#a78382106e5ccc3f145968592dc0e7787">SimulatedAnnealing::initProgress</a></div><div class="ttdeci">void initProgress() override</div><div class="ttdoc">Initialises the evolutionary process. Sets the number of performedEvaluations to 1.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:163</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html"><div class="ttname"><a href="classSimulatedAnnealing.html">SimulatedAnnealing</a></div><div class="ttdoc">Simulated Annealing Algorithm.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:23</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_a3ffc1b7fc648f34f1b5faba61d56e734"><div class="ttname"><a href="classSimulatedAnnealing.html#a3ffc1b7fc648f34f1b5faba61d56e734">SimulatedAnnealing::run</a></div><div class="ttdeci">void run() override</div><div class="ttdoc">Runs the Simulated Annealing algorithm during maxEvaluations.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:127</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_a6814fd2bb6cb6a9bef197400bbeea0e2"><div class="ttname"><a href="classSimulatedAnnealing.html#a6814fd2bb6cb6a9bef197400bbeea0e2">SimulatedAnnealing::evaluateInds</a></div><div class="ttdeci">S evaluateInds(S &amp;popInd, S &amp;offspring)</div><div class="ttdoc">Evaluates the parent and offspring individuals at each generation.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:226</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_a4f35166b08340a0393f24764140c82d9"><div class="ttname"><a href="classSimulatedAnnealing.html#a4f35166b08340a0393f24764140c82d9">SimulatedAnnealing::getResults</a></div><div class="ttdeci">Front&lt; S &gt; getResults() const override</div><div class="ttdoc">Returns the results obtained by the SA algorithm at the end of the process.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:152</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_adc1af6eeafefa2b1ac091287b7f133d1"><div class="ttname"><a href="classSimulatedAnnealing.html#adc1af6eeafefa2b1ac091287b7f133d1">SimulatedAnnealing::setProblem</a></div><div class="ttdeci">void setProblem(shared_ptr&lt; Problem&lt; S &gt;&gt; prob) override</div><div class="ttdoc">Sets the problem to solve using Simulated Annealing.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:269</div></div>
<div class="ttc" id="aclassPseudoRandom_html_a6a85657b19f803952051e045c4181e20"><div class="ttname"><a href="classPseudoRandom.html#a6a85657b19f803952051e045c4181e20">PseudoRandom::randDouble</a></div><div class="ttdeci">static double randDouble()</div><div class="ttdoc">Generates a random double value between 0.0 and 1.0.</div><div class="ttdef"><b>Definition:</b> PseudoRandom.cpp:31</div></div>
<div class="ttc" id="aclassProblem_html_a679e9f627591d774c3bde6c63f9be7b6"><div class="ttname"><a href="classProblem.html#a679e9f627591d774c3bde6c63f9be7b6">Problem::getNumberOfObjs</a></div><div class="ttdeci">int getNumberOfObjs() const</div><div class="ttdoc">Get the number of objectives of the problem.</div><div class="ttdef"><b>Definition:</b> Problem.h:135</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_ade440d2d966d7f5c94d377ffe896d035"><div class="ttname"><a href="classSimulatedAnnealing.html#ade440d2d966d7f5c94d377ffe896d035">SimulatedAnnealing::createInitialPopulation</a></div><div class="ttdeci">void createInitialPopulation() override</div><div class="ttdoc">Creates the initial population for the SA. The population of the SA is just one individual.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:208</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_aa268376e2af84bda597ebbc103362bfd"><div class="ttname"><a href="classSimulatedAnnealing.html#aa268376e2af84bda597ebbc103362bfd">SimulatedAnnealing::setPopulationSize</a></div><div class="ttdeci">void setPopulationSize(const int &amp;pSize)</div><div class="ttdoc">This methods is not implemented for this class. The population size of a SA algorithm is always 1.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:300</div></div>
<div class="ttc" id="aclassProblem_html"><div class="ttname"><a href="classProblem.html">Problem</a></div><div class="ttdoc">Class to represent a Problem in the tool. It includes the basic information for a problem a few metho...</div><div class="ttdef"><b>Definition:</b> Problem.h:29</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_aefc2d5fd86c8e8f4f2e560feccf4258d"><div class="ttname"><a href="classSimulatedAnnealing.html#aefc2d5fd86c8e8f4f2e560feccf4258d">SimulatedAnnealing::SimulatedAnnealing</a></div><div class="ttdeci">SimulatedAnnealing(const int &amp;maxEvaluations, const float &amp;initialTemp, const float &amp;tempVariation)</div><div class="ttdoc">Construct a new Simulated Annealing object with all the parameters.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:114</div></div>
<div class="ttc" id="aAbstractEA_8h_html"><div class="ttname"><a href="AbstractEA_8h.html">AbstractEA.h</a></div></div>
<div class="ttc" id="aclassFront_html"><div class="ttname"><a href="classFront.html">Front</a></div><div class="ttdoc">Front class which stores the final results of an EA execution.</div><div class="ttdef"><b>Definition:</b> Front.h:22</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_ae47e783596812e2278925832e9a0c9a7"><div class="ttname"><a href="classSimulatedAnnealing.html#ae47e783596812e2278925832e9a0c9a7">SimulatedAnnealing::updateProgress</a></div><div class="ttdeci">void updateProgress() override</div><div class="ttdoc">Updates the evolutionary process by increasing the performedEvaluations in two.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:174</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_a6545a15cfd4e91e67a12f478896fe1d0"><div class="ttname"><a href="classSimulatedAnnealing.html#a6545a15cfd4e91e67a12f478896fe1d0">SimulatedAnnealing::finishProgress</a></div><div class="ttdeci">void finishProgress() override</div><div class="ttdoc">Finishes the evolutionary process and computes the elapsed time.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:184</div></div>
<div class="ttc" id="aclassSimulatedAnnealing_html_ac0ef97095644bb42c7226e754fab1971"><div class="ttname"><a href="classSimulatedAnnealing.html#ac0ef97095644bb42c7226e754fab1971">SimulatedAnnealing::isStoppingConditionReached</a></div><div class="ttdeci">bool isStoppingConditionReached() override</div><div class="ttdoc">Checks whether the maximum number of evaluations have been performed.</div><div class="ttdef"><b>Definition:</b> SimulatedAnnealing.h:197</div></div>
<div class="ttc" id="aclassAbstractEA_html"><div class="ttname"><a href="classAbstractEA.html">AbstractEA</a></div><div class="ttdoc">Class to define an Abstract Evolutionary Algorithm. This is the base skeleton for future extensions.</div><div class="ttdef"><b>Definition:</b> AbstractEA.h:42</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
